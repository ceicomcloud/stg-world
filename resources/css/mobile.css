/* Mobile Design Global - Stargate Game */
/* Chargé uniquement en mode mobile (Device::isMobile ou ?mobile=1) */

:root {
  --sg-bg: #0b1020;
  --sg-surface: #111833;
  --sg-surface-2: #1a2347;
  --sg-border: #2b356a;
  --sg-primary: #5aa9ff;
  --sg-primary-contrast: #0f1b3d;
  --sg-text: #e6ecff;
  --sg-text-secondary: #a8b3d9;
  --sg-success: #2ecc71;
  --sg-warning: #f1c40f;
  --sg-danger: #e74c3c;
}

html, body {
  background: var(--sg-bg);
  color: var(--sg-text);
}

/* Désactiver le scroll global quand le tiroir est ouvert */
.no-scroll {
  overflow: hidden !important;
  height: 100vh;
}

.game-layout {
  min-height: 100vh;
  background: var(--sg-bg);
  padding-bottom: 64px; /* espace pour navbar mobile en bas */
}

/* Navbar mobile: barre inférieure */
.game-navbar[layout="gamenavbar"] {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--sg-surface);
  border-top: 1px solid var(--sg-border);
  box-shadow: 0 -6px 16px rgba(0,0,0,0.35);
  z-index: 50;
  padding-bottom: env(safe-area-inset-bottom);
}
.game-navbar .navbar-container {
  padding: 0.25rem 0.5rem;
}
.game-navbar .navbar-nav {
  display: flex;
  flex-wrap: nowrap;
  overflow-x: auto;
  gap: 0.5rem;
}
.game-navbar .nav-link {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.5rem 0.75rem;
  border-radius: 8px;
  color: var(--sg-text-secondary);
  white-space: nowrap;
}
.game-navbar .nav-link.active {
  background: var(--sg-surface-2);
  color: var(--sg-text);
}
.game-navbar .nav-link i { font-size: 1rem; }
.game-navbar .nav-link span { font-size: 0.85rem; }

/* Nouveau layout mobile */
.game-body { min-height: 100vh; }
.skip-link { position: absolute; left: -9999px; top: -9999px; }
.skip-link:focus { left: 8px; top: 8px; background: var(--sg-surface-2); color: var(--sg-text); padding: 6px 10px; border-radius: 8px; z-index: 100; }
.game-header { position: relative; }
.game-main { display: flex; flex-direction: column; gap: 0.75rem; padding: 0.5rem; }
.game-toolbar { position: sticky; top: env(safe-area-inset-top); z-index: 40; }
.game-content { display: flex; flex-direction: column; gap: 0.75rem; }
.daily-quests-fab {
  position: fixed;
  bottom: 80px; /* au-dessus de la navbar mobile */
  right: 12px;
  width: 40px;
  height: 40px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: var(--sg-primary);
  color: var(--sg-primary-contrast);
  border: 1px solid var(--sg-border);
  box-shadow: 0 10px 20px rgba(0,0,0,0.35);
}

/* Sidebar fixe pour desktop (cachée sur mobile par défaut) */
.game-sidebar {
  display: none; /* Caché sur mobile */
}

/* Tiroir latéral des ressources (mobile) - gardé pour la version mobile */
.drawer-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.45); z-index: 80; }
.game-drawer { position: fixed; top: 0; bottom: 0; padding-top: env(safe-area-inset-top); padding-bottom: calc(64px + env(safe-area-inset-bottom)); width: 85%; max-width: 420px; background: var(--sg-surface); border-right: 1px solid var(--sg-border); box-shadow: 12px 0 30px rgba(0,0,0,0.35); z-index: 90; display: flex; flex-direction: column; }
.game-drawer.right { right: 0; }
.game-drawer.left { left: 0; }
.drawer-header { display: flex; align-items: center; justify-content: space-between; padding: 0.6rem 0.8rem; border-bottom: 1px solid var(--sg-border); }
.drawer-body { padding: 0.6rem; overflow-y: auto; height: 100%; }
.drawer-close { background: var(--sg-surface-2); border: 1px solid var(--sg-border); border-radius: 8px; padding: 0.35rem 0.6rem; color: var(--sg-text); }

/* Bouton menu navbar (mobile) */
.game-navbar .nav-menu-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 10px;
  border: 1px solid var(--sg-border);
  background: var(--sg-surface-2);
  color: var(--sg-text);
  margin-right: 6px;
}
.game-navbar .nav-menu-btn:active {
  transform: translateY(1px);
}
.game-navbar .nav-menu-btn i { font-size: 1rem; }

/* Cartes et surfaces */
.summary-card, .planet-card, .ranking-card, .galaxy-table-container, .resource-summary {
  background: var(--sg-surface);
  border: 1px solid var(--sg-border);
  border-radius: 12px;
  padding: 0.75rem;
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
}

/* Boutons & badges */
.action-btn, .quick-link {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.5rem 0.75rem;
  border-radius: 10px;
  border: 1px solid var(--sg-border);
  background: var(--sg-surface-2);
  color: var(--sg-text);
}
.action-btn.primary { background: var(--sg-primary); color: var(--sg-primary-contrast); }
.badge { display: inline-flex; align-items: center; gap: 0.3rem; padding: 0.2rem 0.4rem; border-radius: 8px; font-size: 0.75rem; }
.badge-main { background: var(--sg-warning); color: #0f0f0f; }
.badge-bot { background: #7d3cff; color: #fff; }
.badge-own { background: var(--sg-success); color: #0f0f0f; }
.badge-ally { background: #2e86de; color: #fff; }
.badge-enemy { background: var(--sg-danger); color: #fff; }
.badge-empty { background: #59688f; color: #fff; }
.badge-disabled { background: #394567; color: #c6d0f5; }
.badge-shield { background: #4aa3a3; color: #072b2b; }
.badge-vacation { background: #f39c12; color: #0f0f0f; }

/* Resource mobile */
.game-resource-panel.mobile { margin-bottom: 0.75rem; flex: 0 0 auto; width: 100%; }
.mobile-quick-menu { display: flex; gap: 0.5rem; padding: 0.5rem; }
.mobile-quick-menu .quick-link { flex: 1; justify-content: center; }
.resource-list .resource-item { display: grid; grid-template-columns: 40px 1fr auto; gap: 0.5rem; align-items: center; padding: 0.5rem 0; }
.resource-list .storage-bar { height: 8px; background: #22315e; border-radius: 6px; overflow: hidden; }
.resource-list .storage-fill { height: 100%; background: var(--sg-success); }

/* Nouvelle barre compacte des ressources */
.resource-bar-mobile {
  position: sticky;
  top: 0;
  z-index: 20;
  display: flex;
  gap: 0.5rem;
  padding: 0.5rem;
  overflow-x: auto;
  background: var(--sg-surface);
  border: 1px solid var(--sg-border);
  border-radius: 12px;
}
.resource-chip {
  min-width: 140px;
  display: flex;
  align-items: baseline;
  gap: 0.35rem;
  padding: 0.4rem 0.6rem;
  border-radius: 10px;
  border: 1px solid var(--sg-border);
  background: var(--sg-surface-2);
}
.resource-chip .chip-name { font-size: 0.8rem; color: var(--sg-text-secondary); }
.resource-chip .chip-amount { font-weight: 600; }
.resource-chip .chip-rate { font-size: 0.8rem; opacity: 0.85; }
.resource-chip.positive .chip-rate { color: var(--sg-success); }
.resource-chip.negative .chip-rate { color: var(--sg-danger); }
.resource-chip.energy .chip-name { color: #ffd166; }
.resource-chip.research .chip-name { color: #9f7aea; }

/* Nouvelle toolbar compacte (remplace progressivement resource-bar-mobile) */
.resource-toolbar {
  position: sticky;
  top: 0;
  z-index: 50;
  display: grid;
  grid-template-columns: 1fr auto auto;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: rgba(18, 22, 28, 0.85);
  backdrop-filter: blur(8px);
  border-bottom: 1px solid var(--sg-border);
}
.resource-toolbar .rt-group { display: flex; gap: 6px; overflow-x: auto; }
.resource-toolbar .rt-group::-webkit-scrollbar { display: none; }
.rt-chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
  border: 1px solid var(--sg-border);
  border-radius: 999px;
  padding: 6px 10px;
  white-space: nowrap;
  font-size: 12px;
}
.rt-chip .rt-icon { width: 8px; height: 8px; border-radius: 50%; background: #9aa4b2; }
.rt-chip.positive .rt-icon { background: var(--sg-success); }
.rt-chip.negative .rt-icon { background: var(--sg-danger); }
.rt-chip.energy { border-color: rgba(255, 215, 0, 0.4); }
.rt-chip.research { border-color: rgba(135, 206, 250, 0.4); }
.rt-chip .rt-name { opacity: 0.85; }
.rt-chip .rt-amount { font-weight: 600; }
.rt-chip .rt-rate { opacity: 0.75; }
.rt-expand {
  margin-left: auto;
  background: var(--sg-surface-2);
  border: 1px solid var(--sg-border);
  border-radius: 10px;
  padding: 6px 10px;
  font-size: 12px;
}

.resource-details { padding: 10px; border-top: 1px solid var(--sg-border); }
.resource-details .resource-item { display: grid; grid-template-columns: 1fr auto; gap: 10px; padding: 8px 0; }
.resource-details .resource-values { display: flex; gap: 8px; align-items: center; }
.resource-details .storage-bar { height: 6px; border-radius: 6px; background: rgba(255,255,255,0.06); overflow: hidden; }
.resource-details .storage-fill { height: 6px; background: linear-gradient(90deg, var(--sg-success), #7dd3fc); }
.resource-details .summary-item { display:flex; justify-content:space-between; padding:6px 0; font-size:12px; }

/* Galaxy mobile (table) */
.galaxy-table { width: 100%; border-collapse: collapse; }
.galaxy-table th, .galaxy-table td { border-bottom: 1px solid var(--sg-border); padding: 0.5rem; font-size: 0.85rem; }
.galaxy-table thead th { background: var(--sg-surface-2); position: sticky; top: 0; z-index: 1; }
.galaxy-legend.compact { display: flex; gap: 0.75rem; padding: 0.5rem; align-items: center; }
.legend-dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; }

/* Utilitaires mobiles communs (chips, forms, visuals) */
.chip {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.4rem 0.6rem;
  border: 1px solid var(--sg-border);
  background: var(--sg-surface-2);
  color: var(--sg-text);
  border-radius: 999px;
  white-space: nowrap;
}
.chip-active { background: var(--sg-primary); color: var(--sg-primary-contrast); }

.form-input, .form-select {
  width: 100%;
  padding: 0.45rem 0.6rem;
  border-radius: 10px;
  border: 1px solid var(--sg-border);
  background: var(--sg-surface-2);
  color: var(--sg-text);
}

.planet-visual-small { width: 36px; height: 36px; position: relative; }
.planet-sphere-small { width: 100%; height: 100%; border-radius: 999px; background: radial-gradient(circle at 30% 30%, #5365a5, #27345f); box-shadow: inset -8px -10px 16px rgba(0,0,0,0.35); }

/* Containers mobiles pour pages dédiées */
[page^="game-"], [page^="technology-"], [page^="inventory-"], [page^="trade-"], [page^="building-"] {
  display: block;
}
.game-mobile-container, .technology-mobile-container, .inventory-mobile-container, .trade-mobile-container, .building-mobile-container {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  padding: 0.5rem;
}
.legend-dot.own { background: var(--sg-success); }
.legend-dot.ally { background: #2e86de; }
.legend-dot.enemy { background: var(--sg-danger); }
.legend-dot.bot { background: #7d3cff; }
.legend-dot.empty { background: #59688f; }

/* Empire mobile */
.empire-mobile-header { margin-bottom: 0.75rem; }
.empire-summary.compact .summary-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 0.5rem; }
.planet-card { margin-bottom: 0.75rem; }
.planet-sections .grid-list { display: grid; grid-template-columns: 1fr 1fr; gap: 0.35rem; }
.empty-note { color: var(--sg-text-secondary); font-style: italic; }

/* Ranking mobile (cards) */
.ranking-list { display: flex; flex-direction: column; gap: 0.5rem; }
.ranking-card { display: flex; flex-direction: column; gap: 0.35rem; }
.ranking-card .card-top { display: flex; align-items: center; justify-content: space-between; gap: 0.5rem; }
.ranking-card .player-name { font-weight: 600; }
.rank-badge { min-width: 38px; text-align: center; padding: 0.3rem 0.4rem; border-radius: 8px; background: var(--sg-surface-2); }
.rank-badge.gold { background: linear-gradient(180deg, #ffd700, #a67c00); color: #0f0f0f; }
.rank-badge.silver { background: linear-gradient(180deg, #c0c0c0, #7f8c8d); color: #0f0f0f; }
.rank-badge.bronze { background: linear-gradient(180deg, #cd7f32, #8e5a1d); color: #0f0f0f; }
.band-badge { padding: 0.15rem 0.4rem; border-radius: 8px; font-size: 0.75rem; }
.band-badge.strong { background: #27ae60; color: #0f0f0f; }
.band-badge.weak { background: #e67e22; color: #0f0f0f; }
.ranking-card .card-bottom { display: grid; grid-template-columns: 1fr 1fr; gap: 0.35rem; align-items: center; }
.ranking-pagination { display: flex; gap: 0.25rem; justify-content: center; padding: 0.5rem 0; }
.pagination-btn { padding: 0.4rem 0.6rem; border-radius: 8px; border: 1px solid var(--sg-border); background: var(--sg-surface-2); color: var(--sg-text); }
.pagination-btn.active { background: var(--sg-primary); color: var(--sg-primary-contrast); }
.pagination-btn.disabled { opacity: 0.5; cursor: not-allowed; }

/* Divers */
.panel-title { display: flex; align-items: center; gap: 0.4rem; }
.system-input-container { display: flex; gap: 0.35rem; align-items: center; }
.system-input { background: var(--sg-surface-2); border: 1px solid var(--sg-border); color: var(--sg-text); border-radius: 8px; padding: 0.35rem 0.5rem; width: 100px; }
.go-btn, .nav-btn, .compare-btn, .select-compare-btn { background: var(--sg-surface-2); border: 1px solid var(--sg-border); color: var(--sg-text); border-radius: 8px; padding: 0.35rem 0.5rem; }

/* Ajustements généraux */
.game-main-content { padding: 0.5rem; align-items: flex-start; flex-direction: column; margin-top: 0; }
.resource-summary.compact { display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; }